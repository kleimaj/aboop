(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[24,"AuthHandshakeCommon"],{"0Bqi":function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("q23S"),s=n("Ye/N"),i=n("KNE1"),l=(n("17x9"),n("BlMG")),c=n("n6mq");const u={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};var d=e=>{const t=e=>{Object(l.a)(`unauth.account_switcher_modal.${e}`)},{renderContent:n}=e;return o.a.createElement("div",{style:u.mask},o.a.createElement(i.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:u.scroller},o.a.createElement("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:u.modalContainer},n(),o.a.createElement("button",{"aria-label":s.a._("close","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:u.closeButton},o.a.createElement(c.n,{accessibilityLabel:s.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))},h=n("3fKP");function m(e){return a.createElement(d,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>a.createElement(c.c,{display:"flex",justifyContent:"center",flex:"grow"},a.createElement(r.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:h.b.login,signupSource:h.b.login,customLoginTagline:e.customTaglineText||s.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account")}))})}n.d(t,"a",(function(){return m}))},"1yPP":function(e,t,n){},"3fKP":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("17x9");const o={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},r={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},s={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",visualSearch:"unauthVisualSearch",giftWrap:"giftWrap",loginMfa:"loginMfa"};n.n(a).a.oneOf([s.boardPage,s.boardInvite,s.defaultSource,s.giftWrap,s.homePage,s.invite,s.login,s.mwebDefaultSource,s.navigateBoard,s.navigatePin,s.navigateInterest,s.saveButton,s.signupButton,s.unauthBanner,s.unauthHeader,s.userFollow,s.userProfilePage])},"6MIl":function(e,t){e.exports="https://s.pinimg.com/webapp/style/images/web_nux_location_upsell-19d94840.png"},ADkM:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("n6mq");t.a=e=>{if(e.viewerId===e.account.id)return null;{const t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return o.a.createElement(r.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(r.c,{paddingX:1},o.a.createElement(r.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),o.a.createElement(r.c,{marginLeft:3,flex:"grow"},o.a.createElement(r.L,{color:"darkGray",size:"md",truncate:!0,weight:"bold"},e.account.fullName||e.account.username),e.account.email&&o.a.createElement(r.L,{color:"darkGray",size:"md",truncate:!0},e.account.email)))}}},CzMn:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("pDoi");function o(e){const t={};return e.forEach(e=>{const n=a.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}function r(){return o(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}function s(){return o(["signupTriedSkipInputName","signupTriedSkipGender","unauthTopicsFollowed"])}},Iucu:function(e,t,n){},L2Gz:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l}));n("Ye/N");var a=n("pDoi");n("vvax"),n("5239");function o(e,t){return e.some(e=>e.id===t.id)}function r(e){const t=[];if(e){const n=72e5,a=Date.now()-n;for(const o of e)o.ts>=a&&("string"==typeof o.image_signature&&t.push(o.image_signature),"string"==typeof o.first_pin_image_signature&&t.push(o.first_pin_image_signature))}return t}function s(){return{plpImages:r(a.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")),blpImages:r(a.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin"))}}function i(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function l(e){const t=e.log_data;return t&&JSON.parse(t).source||""}},N0Eu:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=(n("q4E0"),n("TSYQ")),s=n.n(r),i=n("Ye/N"),l=n("n6mq");var c=({color:e,image:t,label:n})=>o.a.createElement(l.q,{alt:n,color:e,fit:"cover",naturalHeight:t.height,naturalWidth:t.width,src:t.url},o.a.createElement("div",{className:s()("defaultImageWash")}));n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));const u={lg_136:{imageSize:136,fontSize:"lg"},md_110:{imageSize:110,fontSize:"md"},sm_100:{imageSize:100,fontSize:"sm"}},d=u.lg_136,h=(e="white")=>o.a.createElement(l.c,{position:"absolute",right:!0,marginTop:2,marginRight:2,marginLeft:2,top:!0},o.a.createElement(l.n,{accessibilityLabel:i.a._("selected"),color:e,icon:"check-circle",size:24}));t.c=function({clickHandler:e,inMasonryRefactor:t,interest:n,isHoverableTopicEdu:a,isRenux:r,isSelected:i,isTopicEdu:m,size:p}){const{fontSize:g}=u[p]||d,{background_color:f,images:_,name:b}=n;let S=b;"string"==typeof n.label&&(S=n.label);const x=_["400x"];return o.a.createElement(l.v,{shape:"rounded"},o.a.createElement(l.c,{shape:"rounded",position:"relative",display:"inlineBlock"},o.a.createElement("button",{"aria-selected":i,className:s()("NuxInterest",{NuxInterestSmall:"sm_100"===p&&!a},{hoverableNuxInterestSmall:"sm_100"===p&&a},{NuxInterestMedium:"md_110"===p}),"data-test-id":"nux-picker-topic",onClick:e,role:"option"},o.a.createElement("div",{className:s()("interestCardWrapper")},o.a.createElement(l.c,{position:"absolute",bottom:!0,margin:2,"data-test-id":"nux-picker-topic-label"},o.a.createElement(l.L,{align:"left",color:"white",size:g,weight:"bold"},b)),i&&o.a.createElement("div",{className:s()("selectedWrapper")},h("white"),o.a.createElement("div",{className:"selectedOverlay"})),!i&&!(m&&!a)&&o.a.createElement("div",null,o.a.createElement("div",{className:s()("hoverText")},o.a.createElement(l.L,{align:"left",color:"white",size:g,weight:"bold"},b)),o.a.createElement("div",{className:s()("hoverMask")}))),t?o.a.createElement(l.q,{alt:S,color:f,fit:"cover",naturalHeight:x.height,naturalWidth:x.width,src:x.url},o.a.createElement("div",{className:s()("defaultImageWash")})):o.a.createElement(c,{color:f,image:x,label:S}))))}},QbJe:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("/MKj"),s=(n("Iucu"),n("xdpg")),i=n("L2Gz"),l=n("Ye/N"),c=(n("1yPP"),n("n6mq"));const u=3,d=10,h=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"];var m=o.a.memo((function(){const e=function(){const e=[];let t=0;for(let n=0;n<d;n+=1){e.push([]);for(let a=0;a<u;a+=1){const r=h[t];e[n].push(o.a.createElement("div",{key:n+a,className:`NuxEducationLoaderGrid__column${a}`},o.a.createElement(c.c,{color:r,height:155,width:105,dangerouslySetInlineStyle:{__style:{borderRadius:8}}}))),(t+=1)>=h.length&&(t=0)}}return e}();return o.a.createElement("div",{className:"NuxEducationLoaderGrid"},e)}));var p=o.a.memo((function({selectedInterest:e}){const t={label:l.a._("Food and Drink","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},n={},{label:a,name:r,images:s}=e||t,{"400x":{url:i,height:u,width:d}}=s;n.domain=(a||r||"").trim().toLowerCase().replace(/\s/g,"").concat(".com"),n.imageHeight=u,n.imageWidth=d,n.imageUrl=i;const{domain:h,imageUrl:m,imageHeight:p,imageWidth:g}=n;return o.a.createElement("div",{className:"NuxEducationLoaderPin","data-test-id":"nux-loader-pin"},o.a.createElement(c.c,{position:"relative"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinImage"},o.a.createElement(c.v,{shape:"rounded",height:310,width:210},o.a.createElement(c.q,{alt:l.a._("Pin image","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:p,naturalWidth:g,src:m})),o.a.createElement(c.c,{position:"absolute",top:!0,right:!0,marginTop:1,marginRight:1},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinSaveButton"},o.a.createElement(c.d,{accessibilityLabel:l.a._("Save button"),color:"red",text:l.a._("Save","save button for nux loading step"),size:"md"}))),o.a.createElement(c.c,{position:"absolute",bottom:!0,left:!0,margin:2,maxWidth:"90%"},o.a.createElement("div",{className:"NuxEducationLoaderPin__pinLinkButton"},o.a.createElement(c.c,{padding:2,color:"lightGray",display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:4}}},o.a.createElement(c.c,null,o.a.createElement(c.n,{icon:"arrow-up-right",accessibilityLabel:l.a._("link","Pin website url link for nux loading step"),size:14,color:"darkGray"})),o.a.createElement(c.c,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},o.a.createElement(c.L,{size:"sm",truncate:!0,weight:"bold"},h))))))))}));const g={backgroundColor:"#efefef"},f={transition:"width .4s ease-out"};function _(e,t){return Object.assign({},g,{height:e+"px",borderRadius:t})}function b(e,t,n){return Object.assign({},f,{backgroundColor:e,width:t+"%",borderRadius:n})}var S=({color:e="#333",height:t=8,progress:n=0,outerBorderRadius:a="10px",innerBorderRadius:r="inherit"})=>o.a.createElement(c.c,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:_(t,a)}},o.a.createElement(c.c,{height:"inherit",dangerouslySetInlineStyle:{__style:b(e,n,r)}})),x=n("eOdZ"),w=n("joD6"),E=n("U4JR"),y=n("vVbV"),N=n("5239"),I=n("fArA");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=300,k=5100,v=1e3;var T=Object(I.compose)(Object(r.connect)(null,e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))})),w.a)(class extends a.PureComponent{constructor(...e){super(...e),C(this,"state",{progressPercent:0}),C(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(e(),!t){x.a.create("UserStateResource",{state:N.q,value:N.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){x.a.create("UserStateResource",{state:N.q,value:N.w}).callCreate()}e("loader"),Object(E.a)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/(k/O),100)})),O)}componentDidUpdate(e,t){this.state.progressPercent>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,v))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:a}=this.state;return o.a.createElement("div",{className:"NuxEducationLoader","data-test-id":"nux-complete-loader"},o.a.createElement(c.c,{alignItems:"center",display:"flex",direction:"row",height:"100%",justifyContent:"center",overflow:"hidden",width:"100%"},o.a.createElement(c.c,{position:"relative",marginLeft:10,marginRight:4},o.a.createElement("div",{className:"NuxEducationLoader__loadingCopyContainer"},o.a.createElement(c.m,{size:"sm"},l.a._("All set!","Title for nux loading step")),o.a.createElement(c.c,{marginTop:4},e?l.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step"):l.a._("We're building your home feed with lots of Pins...","Details for nux loading step"))),o.a.createElement("div",{className:"NuxEducationLoader__pinEducationCopyContainer"},o.a.createElement(c.m,{size:"sm"},l.a._("Pins are ideas.","Pin education on NUX loading step")),o.a.createElement(c.c,{marginTop:5},l.a._("They are links saved from around the web","Pin education on NUX loading step")))),o.a.createElement(c.c,{marginRight:5,marginLeft:5,width:344},o.a.createElement(m,null)),o.a.createElement(c.c,null,o.a.createElement(p,{selectedInterest:t[0]}))),n?null:o.a.createElement(c.c,{position:"absolute",top:!0,width:"100%"},o.a.createElement(S,{height:8,color:"#e60023",progress:a})))}}),L=n("IZzd"),R=n("028R"),P=n("0/lc");function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=Object(r.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(P.a)(N.n,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))}))(class extends a.Component{constructor(...e){super(...e),A(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;L.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(E.a)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),A(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(E.a)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),A(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(N.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(N.w),e("extension"),Object(E.a)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return o.a.createElement(R.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}),U=(n("SPMB"),n("XCz/")),B=n("/5zs"),G=n("pLLR");function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=({isChecked:e,label:t,selectGender:n,value:r})=>o.a.createElement(a.Fragment,null,o.a.createElement(c.c,{"data-test-id":`nux-gender-${t}-label`},o.a.createElement(c.r,{htmlFor:t},o.a.createElement("div",{className:"NuxGenderSelector"},o.a.createElement(c.c,{alignItems:"center",display:"flex",flex:"none",paddingX:8,paddingY:6},o.a.createElement(c.C,{checked:e,id:t,name:"genderOptions",onChange:n,size:"md",value:t}),o.a.createElement(c.c,{display:"flex",flex:"grow",marginStart:10},r))))),o.a.createElement(c.j,null));var F=Object(I.compose)(Object(r.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),setNuxGenderProgress:t=>e(Object(P.a)(N.p,t)),updateGenderInfo:t=>e(Object(P.f)({updateUserData:t}))})),G.e)(class extends a.PureComponent{constructor(...e){super(...e),M(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===N.B&&this.props.customGender.length>0,showNextButton:[N.j,N.f].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===N.B&&this.props.customGender.length>0}),M(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({showCustomGenderDoneButton:!1})}),M(this,"updateCustomGender",({value:e})=>this.setState({customGender:e,showCustomGenderDoneButton:e.length>0}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(N.w),Object(E.a)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{requestContext:t}=this.props,{showCustomGenderTextfield:n,showNextButton:a}=this.state;a?this.setState({gender:e,showCustomGenderTextfield:e===N.B}):e===N.B&&new B.c(t,"web_hide_custom_gender_field").enabled()?this.setState({gender:N.B,showCustomGenderTextfield:!1},this.updateGenderCompleteStep):e===N.B||n?this.setState({gender:N.B,customGender:"",showCustomGenderTextfield:!n,showCustomGenderDoneButton:!1}):this.setState({gender:e},this.updateGenderCompleteStep)}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(N.a)}updateGenderCompleteStep(){const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:a,gender:o,showCustomGenderTextfield:r}=this.state;n(r?{gender:N.B,custom_gender:a.slice(0,30)}:{gender:o}).then(()=>{this.setUserStateCompletedGenderStep(),Object(E.a)(101,{component:17,element:241,view:t?213:24,viewParameter:3120}),e()})}submitHandler(e){e.preventDefault()}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:r,showCustomGenderDoneButton:s,showCustomGenderTextfield:i,showNextButton:u}=this.state,d=i?o.a.createElement(a.Fragment,null,o.a.createElement(c.c,{marginEnd:5},o.a.createElement("input",{className:"NuxGenderSelector","data-test-id":"nux-gender-unspecified-input",id:"customGender",onChange:this.setCustomGender,placeholder:r||l.a._("Enter custom gender","placeholder text for custom gender text field"),style:s?N.i:N.h,type:"text"})),!u&&s&&o.a.createElement("div",{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(c.d,{color:"red",inline:!0,onClick:()=>this.updateGenderCompleteStep(),text:l.a._("Done","button text for entering a custom gender type")}))):o.a.createElement(U.a,{name:"web_nux_gender_nonbinary_copy"},({group:e})=>"enabled_self"===e?o.a.createElement(c.m,{size:"sm"},l.a._("Prefer to self-describe","nux.gender.selfButton","Option for gender besides male and female")):"enabled_specify"===e?o.a.createElement(c.m,{size:"sm"},l.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female")):"enabled_tell"===e?o.a.createElement(c.m,{size:"sm"},l.a._("Tell us another","nux.gender.tellButton","Option for gender besides male and female")):o.a.createElement(c.m,{size:"sm"},l.a._("Non-binary","Non-binary label for custom gender")));return o.a.createElement(c.c,{display:"flex",direction:"column",height:"100%",justifyContent:"around",paddingY:8,width:"100%"},o.a.createElement(c.c,{direction:"column",display:"flex",paddingX:8,dangerouslySetInlineStyle:{__style:{textAlign:"center"}}},o.a.createElement(c.m,{size:e?"xs":"sm"},t),e&&o.a.createElement(c.L,{align:"center",size:"xl"},n)),o.a.createElement(c.c,null,o.a.createElement(c.j,null),o.a.createElement(D,{isChecked:!i&&this.state.gender.toLowerCase()===N.f,label:N.f,selectGender:()=>this.onSelectGender(N.f),value:o.a.createElement(c.m,{size:"sm"},l.a._("Female"))}),o.a.createElement(D,{isChecked:!i&&this.state.gender.toLowerCase()===N.j,label:N.j,selectGender:()=>this.onSelectGender(N.j),value:o.a.createElement(c.m,{size:"sm"},l.a._("Male"))}),o.a.createElement(D,{isChecked:i,label:N.B,selectGender:()=>this.onSelectGender(N.B),value:d})),u&&o.a.createElement(c.c,{"data-test-id":"nux_gender_next_btn",marginTop:8,marginStart:8,marginEnd:8},o.a.createElement(c.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:i&&0===this.state.customGender.length,onClick:()=>this.updateGenderCompleteStep(),text:l.a._("Next","next nux step button"),type:"button"})))}}),z=n("xAAE"),H=n("6MIl"),W=n.n(H);function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q="Country";class Y extends a.Component{constructor(...e){super(...e),$(this,"state",{focused:!1,errorIsOpen:!1}),$(this,"handleOnChange",e=>{this.props.onChange({event:e,value:e.target.value})}),$(this,"handleBlur",()=>{this.props.errorMessage&&this.setState({errorIsOpen:!1})}),$(this,"handleFocus",()=>{this.props.errorMessage&&this.setState({errorIsOpen:!0})})}static getDerivedStateFromProps(e,t){return e.errorMessage!==t.errorMessage?{errorIsOpen:!!e.errorMessage,errorMessage:e.errorMessage}:null}render(){const{id:e,name:t,options:n,value:o}=this.props;let r={backgroundColor:"white",border:"1px solid #979797",borderRadius:8,cursor:"pointer",height:68,fontSize:20,paddingLeft:32,width:"100%",WebkitAppearance:"none",MozAppearance:"none"};return o===q&&(n.unshift({label:q,value:q}),r={...r,color:"lightGray"}),a.createElement(c.c,{alignItems:"center",display:"flex",position:"relative"},a.createElement(c.c,{alignItems:"center",bottom:!0,color:"white",display:"flex",position:"absolute",dangerouslySetInlineStyle:{__style:{margin:"1px",paddingRight:"31px",paddingLeft:"15px",pointerEvents:"none"}},right:!0,shape:"rounded",top:!0},a.createElement(c.n,{icon:"arrow-down",size:24,color:"darkGray",accessibilityLabel:""})),a.createElement("select",{id:e,name:t,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleOnChange,ref:e=>{this.select=e},value:o,style:r},n.map(e=>a.createElement("option",{key:e.value,value:e.value,disabled:e.value===q},e.label))))}}$(Y,"defaultProps",{options:[]});var V=e=>{const{defaultOptions:t,id:n,items:a,name:r,onChange:s,value:i}=e,l=(a.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return o.a.createElement(Y,{id:n,name:r,onChange:s,options:l,value:i})},X=n("zLLH"),Q=Object(X.c)({name:"CountriesResource",key:"items"})(V),J=Object(X.c)({name:"LocalesResource",key:"items"})(V),K=n("17x9"),Z=n.n(K),ee=n("pDoi");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne="Country";class ae extends a.PureComponent{constructor(...e){super(...e),te(this,"state",{locale:this.props.reduxLocale||(this.context||{}).locale||N.c,country:this.props.reduxCountry||(this.context||{}).country||N.b,swappingLanguage:!1,swappingCountry:!1}),te(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:a}=this.props,{country:o,locale:r}=this.state;n({updateUserData:{country:o,locale:r}}).then(()=>{t||a(N.a),Object(E.a)(101,{component:17,element:10374,view:24,viewParameter:3139}),e()})}),te(this,"onLocationButtonOnMount",()=>{if(!navigator.geolocation)return;navigator.geolocation.getCurrentPosition(e=>{this.setState({country:this.props.reduxCountry||(this.context||{}).country||N.b}),Object(E.a)(7438)},()=>{Object(E.a)(7436)})}),te(this,"updateLocale",({value:e})=>this.setState({locale:e})),te(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,requestContext:n,setNuxLocaleProgress:a}=this.props;t||a(N.w),e("country"),new B.c(n,"web_nux_us_location_upsell").enabled()&&(this.inNuxUsLocationUpsellExp=!0,this.setState({country:ne}),this.onLocationButtonOnMount()),ee.b.localStorage.getItem("signupUserLocale")||ee.b.localStorage.getItem("signupUserCountry")||Object(E.a)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:a,updateUserInfo:o}=this.props,{country:r,locale:s}=t,{country:i,locale:l}=this.state,c=r!==i,u=s!==l;(c||u)&&o({updateUserData:{country:i,locale:l}}).then(()=>{c&&(ee.b.localStorage.setItem("signupUserCountry",i),this.setState({swappingCountry:!0})),u&&(ee.b.localStorage.setItem("signupUserLocale",l),a?this.setState({swappingLanguage:!0}):n(!0),Object(z.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:a,swappingCountry:r}=this.state;let s=t;return this.inNuxUsLocationUpsellExp&&!r&&(s=ne),o.a.createElement(c.c,{display:"flex",direction:"column",height:"100%",padding:8,width:"100%"},o.a.createElement(c.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{textAlign:"center"}},display:"flex",direction:"column",flex:"grow",justifyContent:"around",marginBottom:8},o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.m,{size:"sm"},e)),o.a.createElement(U.a,{name:"web_nux_us_location_upsell",activate:!1},({group:e})=>{let t=-12,n=-12;return e.includes("enabled_image")&&(t=7,n=6),e.includes("enabled")?o.a.createElement(c.c,{marginBottom:t,marginTop:n},o.a.createElement(c.L,null,l.a._("We'll use this to personalize the Pins and ads you see","location upsell supporting text"))):null}),o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.c,{"data-test-id":"nux-locale-select"},o.a.createElement(J,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})),o.a.createElement(c.c,{marginTop:4,"data-test-id":"nux-country-select"},o.a.createElement(Q,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:s})))),o.a.createElement(c.c,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(c.d,{size:"lg",color:"red",text:l.a._("Next","go to next step"),onClick:this.onNextButtonClick,type:"submit",disabled:a||s===ne})),o.a.createElement(U.a,{name:"web_nux_us_location_upsell",activate:!1},({group:e})=>e.includes("image")?o.a.createElement(c.c,{marginTop:5,marginBottom:-8,marginLeft:-8,marginRight:-8,overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:8}}},o.a.createElement(c.q,{alt:l.a._("Web Desktop Location Upsell","location upsell image"),src:W.a,naturalHeight:170,naturalWidth:622})):null))}}ae.contextTypes={country:Z.a.string,locale:Z.a.string};var oe=Object(I.compose)(G.e,Object(r.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(P.f)(t)),setNuxLocaleProgress:t=>e(Object(P.a)(N.o,t)),dispatchSetNuxStepProgress:t=>e(Object(y.a)(t))})))(ae),re=n("D2p8"),se=n("shJ5");var ie=({nuxStepIndex:e,showCounter:t,numSteps:n})=>t&&n>1?o.a.createElement(c.c,null,o.a.createElement(c.L,{size:"md"},Object(s.i)(l.a._("Step {{current}} of {{total}}"),{current:`${e+1}`,total:`${n}`}))):null;const le=40,ce="10px",ue="15px",de="30px",he="45px",me="85px",pe=(e,t,n,a,r)=>o.a.createElement(c.c,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",margin:2,width:t},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{marginTop:n===ce?"3px":"0px"}},"data-test-id":"nux-toc-dot",color:e,height:n,shape:"circle",width:n}),a&&o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{whiteSpace:r?"nowrap":"",marginTop:n===ce?"6px":"4px"}},"data-test-id":"nux-toc-text",display:"flex",wrap:!0},o.a.createElement(c.L,{align:"center",color:e,size:"sm",weight:"bold"},a))),ge="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var fe=o.a.memo((function({renderType:e,currentNuxStep:t,steps:n,onPrevStepClick:a}){const r=n.map(e=>e.moduleName),s=r.indexOf(t.moduleName),i=s>1&&o.a.createElement(c.c,{display:"flex",alignItems:"center"},o.a.createElement(c.o,{accessibilityLabel:l.a._("Go back to previous step","Accessibility label on NUX back button"),dangerouslySetSvgPath:{__path:ge},iconColor:"gray",size:"sm",onClick:a}));if(n.length>1)return o.a.createElement(c.c,{"data-test-id":"nux-toc-container",display:"flex",justifyContent:"between",padding:4},o.a.createElement(c.c,{width:le},i),o.a.createElement(c.c,{display:"flex",justifyContent:"center"},n.map((n,a)=>o.a.createElement("div",{key:a},function(n){const a=r.indexOf(n.moduleName)>s,o=a?"darkGray":"red",i=a?ce:ue;let c="",u=de,d=!1;if("single"===e){u=he,d=!0;const e=n.moduleName===t.moduleName,a={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents"),NuxLocaleCountryStep:l.a._("Your Language","Label for NUX language/locale step in a table of contents"),NuxPicker:l.a._("Your Interests","Label for NUX topic picker in a table of contents"),NuxExtensionUpsell:l.a._("Your Browser","Label for NUX Browser Extension in a table of contents")};c=e?a[n.moduleName]:""}if("all"===e){u=me,c={NuxGenderStep:l.a._("You","Label for NUX gender step in a table of contents, where text should be short since there is not much space to show it"),NuxLocaleCountryStep:l.a._("Language","Label for NUX language/locale step in a table of contents, where text should be short since there is not much space to show it"),NuxPicker:l.a._("Interests","Label for NUX topic picker in a table of contents, where text should be short since there is not much space to show it"),NuxExtensionUpsell:l.a._("Extension","Label for NUX Browser Extension in a table of contents, where text should be short since there is not much space to show it")}[n.moduleName]||""}return pe(o,u,i,c,d)}(n)))),o.a.createElement(c.c,{width:le}))}));const _e=640,be=360,Se=544,xe=800,we=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"];var Ee=class extends a.PureComponent{componentDidMount(){document.body&&(document.body.style.overflow="hidden"),re.c.pause()}componentWillUnmount(){document.body&&(document.body.style.overflow=""),re.c.resume()}render(){const{children:e,displayHide:t,onHide:n,onPrevStepClick:r,nuxStep:s,steps:i,isLoading:u,showCounter:d,showTableContents:h,showShortRenuxPicker:m}=this.props,p=i.map(e=>e.moduleName).indexOf(s.moduleName);return o.a.createElement(c.s,null,o.a.createElement(c.c,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",width:"100vw",top:!0},o.a.createElement(c.c,{color:"white",dangerouslySetInlineStyle:{__style:{transition:we.includes(s.moduleName)?"":"width 0.5s"}},direction:"column",display:"flex",height:"NuxPicker"===s.moduleName&&m?be:_e,position:"relative",shape:"rounded",width:we.includes(s.moduleName)?Se:xe},u&&o.a.createElement(se.a,null),h&&o.a.createElement(a.Fragment,null,o.a.createElement(fe,{currentNuxStep:s,onPrevStepClick:r,renderType:"dots",steps:i}),o.a.createElement(c.j,null)),o.a.createElement(c.c,{flex:"grow",height:"100%",width:"100%"},e),o.a.createElement(c.c,{position:"absolute",marginEnd:8,marginTop:8,right:!0,top:!0},o.a.createElement(ie,{nuxStepIndex:p,showCounter:d,numSteps:i.length}),t&&n&&o.a.createElement(c.o,{accessibilityLabel:l.a._("cancel","close nux modal"),icon:"cancel",onClick:n,size:"sm"})))))}},ye=n("CzMn"),Ne=n("1inl"),Ie=n("rh3l"),Ce=n("N0Eu");var Oe=e=>{const{interests:t,InterestComponentToRender:n,gridContainerRef:a}=e,r=t&&t.length<1,s=N.k.DESKTOP;return o.a.createElement("div",{style:s.STYLES},o.a.createElement(c.w,{columnWidth:s.COLUMN_WIDTH,comp:n,loadItems:()=>{},gutterWidth:s.GUTTER_WIDTH,items:t,minCols:s.COLUMNS,scrollContainer:()=>a||window}),o.a.createElement(c.H,{accessibilityLabel:l.a._("Loading topics"),show:r}))};var ke=e=>{const{inMasonryRefactor:t,interests:n,handleInterestClickFn:a,isRenux:r}=e;return o.a.createElement(Oe,Object.assign({},e,{InterestComponentToRender:({itemIdx:e,data:s})=>{const i={clickHandler:a(s),interest:s,key:s.id,inMasonryRefactor:t,isRenux:r,isSelected:s.is_followed,size:"lg_136"};return n.length>0&&ee.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(Ce.c,i)}}))},ve=n("sEfC"),Te=n.n(ve),Le=n("E+oP"),Re=n.n(Le);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ae={input:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:n("a0jO").b,fontSize:16,fontWeight:600,height:"100%",outline:"none",padding:"0",width:"100%"}},je=8,Ue=450,Be=40,Ge=5,Me=10;var De=class extends o.a.PureComponent{constructor(...e){super(...e),Pe(this,"state",{userSearchQuery:"",cachedSearchResults:{},loading:!1}),Pe(this,"resultsContainerRef",o.a.createRef()),Pe(this,"onCancelButtonClick",()=>{const{isRenux:e}=this.props;Object(E.a)(101,{view:e?213:24,viewParameter:172,component:17,element:114}),this.setState({userSearchQuery:""}),this.handleSearchAndLoading("")}),Pe(this,"onQueryChange",e=>{const{isRenux:t}=this.props,{cachedSearchResults:n}=this.state;if(e.target instanceof HTMLInputElement){const a=e.target.value;Re()(n)&&this.getNormalizedQuery(a).length>0&&Object(E.a)(7472,{view:t?213:24,viewParameter:172,component:17,element:227}),this.setState({userSearchQuery:a}),this.handleSearchAndLoading(a)}}),Pe(this,"onQueryInputFocus",e=>{const{isRenux:t}=this.props;Object(E.a)(101,{view:t?213:24,viewParameter:172,component:17,element:227})}),Pe(this,"callDebouncedSearchApi",Te()(()=>{const{cachedSearchResults:e,userSearchQuery:t}=this.state;x.a.create("NuxInterestsSearchResource",{query:t}).callGet({showError:!1},{retries:1}).then(n=>{if(n.resource_response&&n.resource_response.data){const a=n.resource_response.data,o={...e,[t]:a};this.setState({cachedSearchResults:o,loading:!1})}}).catch(n=>{const a={...e,[t]:[]};this.setState({cachedSearchResults:a,loading:!1})}).finally(()=>{this.scrollSearchResultsIntoView()})},Me))}scrollSearchResultsIntoView(){this.resultsContainerRef.current&&this.resultsContainerRef.current.scrollIntoView({behavior:"smooth",block:"start"})}handleSearchAndLoading(e){const{cachedSearchResults:t}=this.state,n=this.getNormalizedQuery(e);n.length>0&&!t[n]?(this.setState({loading:!0},this.scrollSearchResultsIntoView),this.callDebouncedSearchApi()):this.setState({loading:!1},this.scrollSearchResultsIntoView)}mapInterestsFollowingState(e){const{selectedInterests:t}=this.props;return e.map(e=>(e.is_followed=Object(i.b)(t,e),e))}getNormalizedQuery(e){return e.trim().toLowerCase()}getSearchResults(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=this.getNormalizedQuery(t);return 0===n.length?[]:e[n]?e[n].slice(0,Ge):[]}renderSearchBar(){const{userSearchQuery:e}=this.state;return o.a.createElement(c.c,{color:"lightGray",display:"flex",height:Be,width:Ue,shape:"rounded"},o.a.createElement(c.c,{alignItems:"center",display:"flex",flex:"grow",height:"100%",paddingX:4,position:"relative"},o.a.createElement(c.c,{marginRight:3,flex:"none"},o.a.createElement(c.n,{accessibilityLabel:l.a._("Search icon","Search icon in search box"),icon:"search",size:20})),o.a.createElement("input",{"data-test-id":"search-box-input",name:"topicSearchBoxInput",onChange:this.onQueryChange,onFocus:this.onQueryInputFocus,placeholder:l.a._("Search for a topic","Placeholder for Search for when user hasn't typed in Search bar"),style:Ae.input,type:"text",value:e}),e.length>0&&o.a.createElement(c.c,{marginLeft:3,flex:"none"},o.a.createElement(c.o,{accessibilityLabel:l.a._("Cancel Search icon","Cancel Search icon in search box"),icon:"cancel",size:"sm",onClick:this.onCancelButtonClick}))))}renderResults(){const{handleInterestClickFn:e,inMasonryRefactor:t,isRenux:n,renderInterestGrid:a,suggestedSearchQuery:r}=this.props,{loading:i,userSearchQuery:u}=this.state,d=this.mapInterestsFollowingState(this.getSearchResults()),h=t?a(d,!0):o.a.createElement(ke,{gridContainerRef:this.resultsContainerRef.current,handleInterestClickFn:e,inMasonryRefactor:!1,interests:d,isRenux:n,showTableOfContents:!1}),m=Ce.a.imageSize+(t?je:0);return o.a.createElement(c.c,{overflow:"hidden",width:"100%",height:m,ref:this.resultsContainerRef},i&&o.a.createElement(c.H,{accessibilityLabel:l.a._("Loading search results","Label for a spinner that shows when waiting for a Search result"),show:!0}),!i&&d.length>0&&h,!i&&0===d.length&&o.a.createElement(c.c,{height:"100%",display:"flex",alignItems:"center",justifyContent:"around",direction:"column"},o.a.createElement(c.n,{accessibilityLabel:l.a._("Search icon","Search icon used as placeholder in Search results"),icon:"search",color:"lightGray",size:45}),o.a.createElement(c.L,{size:"xl",color:"gray",weight:"bold"},0===u.length?s.c(l.a._('Try searching for a topic like "{{ suggestedSearchQuery }}"',"Placeholder for Search for when user hasn't typed in Search bar"),{suggestedSearchQuery:r}):s.c(l.a._("We couldn't find {{ userSearchQuery }}. Try another word or phrase!","Shown when we don't have results for a user's search query"),{userSearchQuery:u}))))}render(){const{cachedSearchResults:e,userSearchQuery:t}=this.state,n=0===t.length&&Re()(e);return o.a.createElement(c.c,{display:"flex",direction:"column",justifyContent:"between",alignItems:"center",height:n?100:200},n&&o.a.createElement(c.L,{size:"xl"},l.a._("Still can't find what you're looking for?","Introduces a search bar, which is shown underneath this text.")),this.renderSearchBar(),!n&&this.renderResults())}},Fe=n("HZII");function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const He=n.n(Fe)()(()=>{ee.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});class We extends o.a.PureComponent{constructor(...e){super(...e),ze(this,"state",{showSearch:!1}),ze(this,"gridContainer",o.a.createRef()),ze(this,"scrollContainer",o.a.createRef()),ze(this,"handleScroll",()=>{const{showSearch:e}=this.state,t=this.scrollContainer.current,n=this.gridContainer.current;if(t&&n){He();const a=t.scrollTop+t.offsetHeight>=n.clientHeight;this.props.handleBottomScroll(a),a&&!e&&this.setState({showSearch:!0})}}),ze(this,"renderInterestGrid",(e,t)=>{const{handleInterestClickFn:n,isRenux:a}=this.props;return e.length>0&&!t&&ee.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(c.c,{display:"flex",marginTop:-2,marginStart:5,wrap:!0},e.map((e,t)=>o.a.createElement("div",{key:t},o.a.createElement(c.c,{padding:2},o.a.createElement(Ce.c,{clickHandler:n(e),interest:e,key:e.id,inMasonryRefactor:!0,isRenux:a,isSelected:e.is_followed,size:"lg_136"})))))})}render(){const{disableScroll:e,handleInterestClickFn:t,interests:n,isRenux:r,reduxCountry:s,reduxLocale:i,showTableOfContents:u,selectedInterests:d}=this.props,{showSearch:h}=this.state,m=s||(this.context||{}).country||N.b,p=i||(this.context||{}).locale||N.c,g=["US","AU","GB"].includes(m)&&p.startsWith("en");return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{paddingBottom:"40px"}},height:u?"280px":"368px",flex:"grow",overflow:e?"visible":"scrollY",width:"800px",ref:this.scrollContainer},o.a.createElement("div",{onScroll:this.handleScroll,onWheel:this.handleScroll},n.length>0?o.a.createElement(U.a,{name:"web_topic_picker_remove_masonry_refactor"},({anyEnabled:e})=>o.a.createElement(a.Fragment,null,o.a.createElement(c.c,{ref:this.gridContainer},e?this.renderInterestGrid(n):o.a.createElement(ke,{gridContainerRef:this.scrollContainer.current,handleInterestClickFn:t,inMasonryRefactor:!1,interests:n,isRenux:r,showTableOfContents:u})),h&&o.a.createElement(U.a,{name:"web_nux_topic_search",isEligible:g},({anyEnabled:e})=>e&&o.a.createElement(c.c,{width:"100%",paddingY:7,marginBottom:-10},o.a.createElement(De,{handleInterestClickFn:t,inMasonryRefactor:e,isRenux:r,renderInterestGrid:this.renderInterestGrid,selectedInterests:d,suggestedSearchQuery:n[0].name}))))):o.a.createElement(c.H,{accessibilityLabel:l.a._("Loading default interests"),show:!0})))}}We.contextTypes={country:Z.a.string,locale:Z.a.string};var $e=Object(r.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),()=>{})(We),qe=n("zwad"),Ye=n("573u");function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xe extends a.PureComponent{constructor(...e){super(...e),Ve(this,"state",{defaultInterests:[],defaultInterestsSet:new Set,contextualMap:{},addedContextualTopics:new Set,numTopicsToShow:null}),Ve(this,"setShortenedRenuxExp",e=>{const{inShortenedEnabled:t,activateShortenedExpFn:n,setShortenedRenuxContainer:a}=this.props;e.length>0&&"viewed_recs"===Object(i.d)(e[0])&&n&&(n(),t&&(a(),this.setState({numTopicsToShow:5})))}),Ve(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,a=!Object(i.b)(t,e);n([e],a),this.logInterestClick(a),this.contextualUpdateInterests(new Set([e.id]))}),Ve(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(E.a)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),Ve(this,"componentName",N.r),Ve(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),Ie.default.logToServer(Ie.default.SERVER_LOG_TYPE.RENDER_TIME,Ie.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),Ve(this,"renderTimers",[])}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(i.a)(),{mostRecentPinImages:n}=this.props,a=e.concat(t);return n.concat(a)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,selectedInterests:n,keepFollowingEnabledGroup:a}=this.props;x.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:N.r,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,defaultNuxInterestsOnly:a,urlParams:qe.a.getQueryStringParams()}).callGet({showError:!1},{retries:1}).then(e=>{if(e.resource_response&&e.resource_response.data){this.logSignupTiming();const t=this.mapInterestsForDisplay(n,e.resource_response.data);this.setShortenedRenuxExp(t);const a=this.state.defaultInterests;this.setState({defaultInterests:t},()=>{a!==t&&this.renderTimers.unshift((new Ye.a).start())});const o=new Set;t.forEach(e=>{!0===e.is_followed&&o.add(e.id)}),Object.keys(o).length>0&&this.contextualUpdateInterests(o)}}).catch(e=>{Ne.a&&Ne.a.showError(e.message||l.a._("Unable to load topics","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(i.b)(e,t),t)),a=[...e.filter(e=>"type_ahead_search"===Object(i.d)(e))];return n.concat(...a)}logSignupTiming(){const e=ee.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<N.x&&Ie.default.logToServer(Ie.default.SERVER_LOG_TYPE.SIGNUP_LOAD,Ie.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),ee.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:!this.props.keepFollowingEnabledGroup&&e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const a=new Set(e.map(e=>e.id)),o=n.filter(e=>!a.has(e.id));return e.concat(o)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,a=e||N.e;t(n.slice(0,a),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:a}=this.state,o=[],r=[];let s=!1;t.forEach(t=>{if(o.push(t),n.add(t.id),e.has(t.id)&&!a.has(t.id)){const e=t.contextual_interests.filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?o.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&r.push(...e),e.forEach(e=>{n.add(e.id)}),s=!0)}}),r.length>0&&o.push(...r),s&&this.setState({addedContextualTopics:new Set([...a,...e]),defaultInterests:o})}render(){const{handleBottomScroll:e,isRenux:t,selectedInterests:n,showTableOfContents:a}=this.props,{numTopicsToShow:r}=this.state,s=this.getInterestsWithUpdatedIsFollowed();return o.a.createElement($e,{disableScroll:!!r&&r<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:r?s.slice(0,r):s,isRenux:!!t,selectedInterests:n,showTableOfContents:a})}}var Qe=Object(r.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(e=>o.a.createElement(U.a,{name:"web_renux_keep_following",isEligible:e.isRenux},({anyEnabled:t})=>o.a.createElement(U.a,{name:"web_renux_short",isEligible:e.isRenux&&!e.isSimpleRenux,activate:!1},({anyEnabled:n,customActivate:a})=>o.a.createElement(Xe,Object.assign({},e,{keepFollowingEnabledGroup:t,inShortenedEnabled:n,activateShortenedExpFn:a}))))),Je=n("DzJC"),Ke=n.n(Je),Ze=n("vvax");function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const tt=o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))"}},height:40,left:!0,marginTop:-10,position:"absolute",right:!0,top:!0});class nt extends a.Component{constructor(e){super(e),et(this,"getButtonState",(e,t,n,a,o=!1)=>{const{hideFollowedInterests:r,isRenux:i,pickButtonTextGenerator:c}=this.props,u=e.length,d=o&&u>=N.l?0:Math.max(0,t-u),{nextButtonText:h,completionNextButtonText:m}=a,p=c(d),g={done:{buttonText:m||l.a._("Done"),isDisabled:!1,allowSkip:!1},more:{buttonText:i&&r?l.a._("Next","go to next step"):s.i(h||p,{numberLeftToFollow:`${d}`}),isDisabled:!0,allowSkip:!1},skip:{buttonText:l.a._("Skip (pick topics for me)"),isDisabled:!1,allowSkip:!0}};return 0===d?g.done:n?g.skip:g.more}),et(this,"setShortenedRenux",()=>{const{setShortenedRenuxModal:e}=this.props;e(),this.setState({showShortRenux:!0})}),et(this,"handleBottomScroll",e=>{const{numberToFollow:t,selectedInterests:n,skipButton:a,nextButtonText:o,nextButtonTextSingleTopic:r,completionNextButtonText:s}=this.props,i={nextButtonText:o,nextButtonTextSingleTopic:r,completionNextButtonText:s},l=this.getButtonState(n,t||N.d,a,i,e);this.setState({...this.state,...l})}),et(this,"handleBottomScrollThrottled",Ke()(this.handleBottomScroll,50)),et(this,"handleNextClick",()=>{const{customProcessFollowedInterests:e,isRenux:t,selectedInterests:n,followedInterests:a,incrementNuxStep:o,setNuxPickerProgress:r,dispatchUpdateFollows:s,dispatchSubmitOrientationContext:i}=this.props;if(e)return t||r(N.a),e(),void o();let l;if(t){const e=a.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});l=Promise.resolve(s(e))}else{const e=[],t=[];n.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)});const a={interests:e.join(),log_data:JSON.stringify(t),referrer:"nux",user_behavior_data:Object(ye.a)()};l=Promise.resolve(i(a))}l.then(()=>{t||r(N.a),Object(E.a)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),o()})});const{nextButtonText:t,nextButtonTextSingleTopic:n,completionNextButtonText:a,isRenux:o,selectedInterests:r}=e,i={nextButtonText:t,nextButtonTextSingleTopic:n,completionNextButtonText:a},c=this.getButtonState(r,e.numberToFollow||N.d,e.skipButton,i);this.state={...c,showShortRenux:!1},this.viewType=o?213:24}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxPickerProgress:n}=this.props;t||n(N.w),e("topic"),Object(E.a)(13,{view:this.viewType,viewParameter:172})}componentDidUpdate(e){const{numberToFollow:t,selectedInterests:n,skipButton:a,nextButtonText:o,nextButtonTextSingleTopic:r,completionNextButtonText:s}=this.props;if(n.length!==e.selectedInterests.length){const e={nextButtonText:o,nextButtonTextSingleTopic:r,completionNextButtonText:s},i=this.getButtonState(n,t||N.d,a,e);this.setButtonState(i)}}setButtonState(e){this.setState({...e})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:a,personalizationCopy:{headerText:r,subHeaderText:s},preselect:i,selectedInterests:u,showTableOfContents:d,numberToFollow:h}=this.props,{isDisabled:m,buttonText:p,showShortRenux:g}=this.state;return o.a.createElement(c.c,{direction:"column",display:"flex",height:"100%"},o.a.createElement(c.c,{display:"visuallyHidden",role:"alert"},Object(Ze.b)(l.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected"),{selectedTopicsCount:u.length})),o.a.createElement(c.c,{paddingX:8,marginTop:8,marginBottom:8,wrap:!0},o.a.createElement(c.m,{size:"xs"},r),t&&o.a.createElement(c.L,{size:"xl"},s)),o.a.createElement(Qe,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:h,onSelectedInterestsChange:a,preselect:i,selectedInterests:u,setShortenedRenuxContainer:this.setShortenedRenux,showTableOfContents:d}),o.a.createElement(c.c,{position:"relative"},!g&&tt,o.a.createElement(c.c,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:4,paddingX:8},o.a.createElement(c.d,{size:"lg",color:"red",text:p,disabled:m,onClick:this.handleNextClick,type:"submit"}))))}}et(nt,"defaultProps",{skipButton:!1,pickButtonTextGenerator:e=>l.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",e,"number of interests left to pick")});var at=Object(r.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),dispatchUpdateFollows:t=>e(Object(P.e)(t)),dispatchSubmitOrientationContext:t=>e(Object(P.b)(t)),setNuxPickerProgress:t=>e(Object(P.a)(N.s,t))}}))(nt),ot=n("ozRy");const rt=(e,t)=>{return((e,t,n)=>({x:Math.floor(e*Math.cos(n)),y:Math.floor(t*Math.sin(n))}))(t/2,e/2,2*Math.random()*Math.PI)},st=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;const it={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},lt="DelightfulBubbles__",ct=[`${lt}fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n`,`${lt}growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n`,`${lt}swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n`,...Object.keys(it).map(e=>{const t=((e,t)=>{const n=e.length,a=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[a]})(Object.keys(it),e);return`${lt}colorChange_${e} {\n      0% {\n        background-color: ${it[e]};\n      }\n      50% {\n        background-color: ${it[t]};\n      }\n    }\n    `})],ut=(dt=ct,["@-webkit-keyframes","@keyframes"].map(e=>dt.map(t=>e+" "+t).join("\n")).join("\n"));var dt;function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mt=e=>{const{delay:t,diameter:n,height:a,initialColor:r,width:s,xOffset:i,yOffset:l}=e,u=((e,t,n,a,o,r,s,i)=>({bubblePositionStyles:{position:"absolute",marginLeft:`${r/2-o}px`,marginTop:`${n/2-o}px`,left:`${s}px`,top:`${i}px`},bubbleSwirlStyles:{animation:`${lt}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${lt}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${lt}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${lt}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:`${t}px`,width:`${t}px`,borderRadius:"50%",backgroundColor:it[a],opacity:0,animation:`${lt}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${lt}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${lt}colorChange_${a} 12s steps(1, start) ${e}s infinite forwards,\n      ${lt}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,a,r,Math.floor(n/2),s,i,l);return o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubblePositionStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleSwirlStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleGrowShrinkStyles}},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:u.bubbleShapeStyles}}))))};class pt extends a.Component{constructor(...e){super(...e),ht(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){return void 0!==this.props.width&&void 0!==this.props.height?{height:this.props.height,width:this.props.width}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{}}createBubbles(e,t){const{bubbleSize:n,delayFactor:a,delayOffset:r,numBubbles:s,xRadiusAdjustment:i,yRadiusAdjustment:l}=this.props,c=e+2*l,u=t+2*i,d=[],h=Object.keys(it);for(let m=0;m<s;m+=1){const s=n+st(-4,4),i=h[m%h.length],{x:l,y:p}=rt(c,u);d.push(o.a.createElement(mt,{delay:m*a+r,diameter:s,initialColor:i,xOffset:l,yOffset:p,height:e,width:t,key:m}))}return d}render(){const e=this.getSize();return o.a.createElement(c.c,Object.assign({},e,{position:"relative"}),o.a.createElement("style",{dangerouslySetInnerHTML:{__html:ut}}),o.a.createElement("div",{ref:e=>this.containerElement=e},this.state.isInitialized&&this.createBubbles(e.height||0,e.width||0),o.a.createElement(c.c,{position:"relative"},this.props.children)))}}ht(pt,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var gt=pt,ft=n("BlMG"),_t=n("0S8y");function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const St=250;var xt=Object(r.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(y.a)(t)),updateNameInfo:t=>e(Object(P.f)({updateUserData:t})),setNuxNameProgress:()=>e(Object(P.a)(N.t,N.a))}))(class extends a.PureComponent{constructor(...e){super(...e),bt(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),bt(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||s.h(e),showNameLengthError:!!e&&e.length>30})}),bt(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(E.a)(101,{element:136,view:24,viewParameter:259})}),bt(this,"continueAndSave",()=>{const{incrementNuxStep:e,setNuxNameProgress:t,updateNameInfo:n}=this.props,{name:a}=this.state;n(Object(_t.a)(a)).then(()=>{t(),Object(E.a)(101,{element:96,view:24,viewParameter:259}),e()})}),bt(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=l.a._("And your name is...?","Error flyout when user doesn't input name"):e&&(n=l.a._("Hmm, that's a few characters too long. Try a nickname instead?","Name exceeds 30 character maximum error")),n}),bt(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),bt(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(ft.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(E.a)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:r,showAccountSwitchModal:i,showNameInput:u}=this.state,d=s.c(l.a._("{{ titleText }}, {{ name }}!","Greeting with inferred name."),{titleText:e,name:r}),h=e,m=l.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account"),p=this.getError(),g=o.a.createElement(c.c,{"data-test-id":"nux-edit-name-btn",marginStart:1},o.a.createElement(c.o,{accessibilityLabel:"editName",bgColor:"transparent",icon:u?"check":"edit",onClick:this.toggleNameInput,size:"sm"}));return o.a.createElement(a.Fragment,null,i&&o.a.createElement(ot.a,{onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0,hideAccountSwitchValueProp:!0,customTaglineText:l.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account")}),o.a.createElement(c.c,{direction:"column",display:"flex",height:"100%",padding:10,minWidth:"100%"},o.a.createElement(c.c,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"around",marginBottom:10,width:"100%"},o.a.createElement(gt,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(c.c,{alignItems:"center",color:"lightWash",direction:"column",display:"flex",height:100,justifyContent:"end",overflow:"hidden",shape:"circle",width:100},o.a.createElement(c.n,{accessibilityLabel:l.a._("Loading state for any sign up registration"),color:"gray",icon:"person",size:70}))),o.a.createElement(c.c,{alignItems:"center",marginTop:5},o.a.createElement(c.L,{align:"center",size:"lg",truncate:!0},n)),o.a.createElement(c.c,{alignItems:"end",display:"flex",width:"100%"},o.a.createElement(c.c,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",marginStart:9,maxHeight:170,overflow:"hidden",width:"100%"},o.a.createElement(c.r,{htmlFor:"name"},o.a.createElement(c.m,{size:"sm"},u?h:d)),u&&o.a.createElement(c.c,{alignItems:"center","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",padding:1},o.a.createElement(c.c,{width:St},o.a.createElement(c.N,{id:"name",errorMessage:p,onChange:this.onNameChange,placeholder:l.a._("name"),type:"text",value:r})),g)),!u&&g),o.a.createElement(c.c,{width:"100%"},o.a.createElement(c.L,{align:"center",size:"xl"},t))),o.a.createElement(c.c,{"data-test-id":"nux_name_done_btn"},o.a.createElement(c.d,{accessibilityLabel:l.a._("Next","go to next nux step"),color:"red",disabled:!!p,onClick:this.continueAndSave,text:l.a._("Next","next nux step button"),type:"button"})),o.a.createElement(c.c,{marginTop:4},o.a.createElement(c.Q,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(c.L,{size:"lg",align:"center"},m),o.a.createElement(c.L,{align:"center",size:"lg",weight:"bold"},o.a.createElement(c.u,{href:"#"},l.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}});const wt=[{moduleName:"NuxPicker"},{moduleName:"NuxExtensionUpsell"},{moduleName:"NuxEducationLoader"}];var Et=n("dtw8");function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nt extends a.Component{constructor(...e){super(...e),yt(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedInterests:[],userClickedBack:!1,showShortRenuxModal:!1}),yt(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:a}=this.props;Object(E.a)(4105,{view:n?213:24,viewParameter:171}),n||a(!0),e(),t&&this.handleNavigate("/")}),yt(this,"mounted",!1),yt(this,"handleNavigate",e=>{const{router:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),yt(this,"handleSelectedInterestsChange",(e,t)=>{this.setState((n,a)=>{const o=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),r=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:s}=a;return s(o.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:o,followedInterests:r}})}),yt(this,"nuxSteps",{NuxGenderStep:F,NuxLocaleCountryStep:oe,NuxPicker:at,NuxExtensionUpsell:j,NuxEducationLoader:T,NuxWelcomeNameStep:xt}),yt(this,"setShortenedRenuxModal",()=>this.setState({showShortRenuxModal:!0})),yt(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,a=t[e].moduleName;return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:172}[a];t&&Object(E.a)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e}=this.props;this.mounted=!0,Object(E.a)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let a=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let o=!1;a=a.map(e=>e.id===t.id?(o=!0,t):e),o||a.push(t)}),a}getUpdatedSelectedInterests(e,t,n){let a=[...e];return t.forEach(t=>{const o=Object(i.b)(a,t);n&&!o?a.push({...t,is_followed:n}):!n&&o&&(a=e.filter(e=>e.id!==t.id))}),a}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,requestContext:a,steps:o}=this.props;let r,i;const c=e.moduleName,u=o.map(e=>e.moduleName).indexOf(c)===o.length-2;switch(c){case"NuxWelcomeNameStep":return{headerText:l.a._("Welcome to Pinterest","greeting on welcome name step"),subHeaderText:l.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step")};case"NuxGenderStep":return r=l.a._("How do you identify?","Header in NUX gender step."),i="",n&&(r=l.a._("Its time to refresh your feed!","Title on the modal asking user's gender"),i=l.a._("How would you describe yourself?","Subtitle on the modal asking user's gender")),{headerText:r,subHeaderText:i};case"NuxLocaleCountryStep":return new B.c(a,"web_nux_us_location_upsell").enabledWithNoActivation()?{headerText:l.a._("Share your location to find ideas where you are","Experiment header in NUX locale/country step")}:{headerText:l.a._("Pick your language and country/region","Header in NUX locale/country step")};case"NuxPicker":return n&&t?(r=l.a._("What are you into these days?","Header in ReNUX topic picker step."),i=l.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.")):(r=u?l.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step."):l.a._("Tell us what you're interested in","Header in NUX topic picker step."),i=s.c(l.a._("Pick {{ numberToFollow }} (or more!) to start discovering new ideas","Subheader in NUX topic picker step with required number of topics to follow"),{numberToFollow:String(N.d)})),{headerText:r,subHeaderText:i};case"NuxExtensionUpsell":return{headerText:r=u?l.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step."):l.a._("Get our handy browser button","Header in NUX browser extension upsell step."),subHeaderText:l.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{followedInterests:n,selectedInterests:a}=this.state,{hideFollowedInterests:r,isRenux:s,isSimpleRenux:i,requestContext:l}=this.props,c=e.moduleName,u=this.nuxSteps[c],d=this.hasNuxStep("NuxGenderStep");return o.a.createElement(u,Object.assign({},e.options,{experiments:l.experiments,followedInterests:n,hasGenderStep:d,hideFollowedInterests:r,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isSimpleRenux:i,isRenux:s,numberToFollow:s&&r?N.u:N.d,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),requestContext:l,selectedInterests:a,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e}),setShortenedRenuxModal:this.setShortenedRenuxModal}))}getNextStepIndex(e,t,n){const{isRenux:a}=this.props;let o=e+1;if(n)return o;if(!a)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}incrementNuxStep(e){const{steps:t,dispatchSubmitOrientationContextFollow:n}=this.props,{userClickedBack:a}=this.state,o=this.getNextStepIndex(e,t,a);return o>=t.length?this.onComplete:()=>{const a=t=>{if(e!==t)return this.setState({nuxStep:t})};if(t.length>o&&t[o].options&&t[o].options.onStartApi){t[o].options.onStartApi===N.g?n().finally(a):a(o)}else a(o)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{isLoading:e,nuxStep:t,showShortRenuxModal:n}=this.state,{handleDismiss:a,isLandingPage:r,isPartner:s,isRenux:i,steps:l}=this.props,c=e=>["NuxEducationLoader"].includes(e),u=l.filter(e=>!c(e.moduleName)),d=!c(l[t].moduleName)&&!r&&!i,h=d&&u.length>1&&!s,m=d&&!h,p=!(!i||c(l[t].moduleName));return o.a.createElement(Ee,{displayHide:p,isLoading:e,nuxStep:l[t],onHide:a,onPrevStepClick:this.onPrevStepClickFn(t),showCounter:m,showShortRenuxPicker:n,showTableContents:h,steps:u},this.nuxStepToRender(l[t],h))}}yt(Nt,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(I.compose)(G.e,Object(r.connect)(({viewer:e})=>({isPartner:e.isAuth&&e.isPartner}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchSubmitOrientationContextFollow:()=>e(Object(P.c)()),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(P.d)(t))})),w.a,(function(e){return class extends a.PureComponent{constructor(...e){var t,n,a;super(...e),a={skipExtStep:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}componentDidMount(){const{steps:e}=this.props;L.a.extensionReady(N.m).then(t=>{e.some(e=>"NuxExtensionUpsell"===e.moduleName)&&t&&this.setState({skipExtStep:!0})})}render(){let{steps:t}=this.props;const{skipExtStep:n}=this.state;return n&&(t=t.filter(e=>"NuxExtensionUpsell"!==e.moduleName)),o.a.createElement(e,Object.assign({},this.props,{steps:t}))}}}),(function(e){return function(t,n){return o.a.createElement(e,Object.assign({},t,{steps:t.steps||wt}))}}),Et.withRouter)(Nt)},SPMB:function(e,t,n){},UPfj:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"b",(function(){return p}));var a=n("gxu6"),o=n("pDoi"),r=n("oZBM");function s(e,t=!1,n="",a,o){return t?r.a.tier1:n&&n.includes("yahoo.co.jp")&&"JP"===e?r.a.tier1:e?(e=e||"",r.g.has(e)?r.a.tier1:r.i.has(e)?r.a.tier2:r.a.tier3):r.a.tier1}function i(){a.b("hasBeenShownLoginModalInOpen","true",r.e)}function l(e){o.b.sessionStorage.setItem("uimb",!!e)}function c(){return o.b.sessionStorage.getItem("uimb")||!1}function u(e){return void 0!==e&&o.b.sessionStorage.setItem("mdfu",e),o.b.sessionStorage.getItem("mdfu")||0}function d(e){o.b.localStorage.setItem("uoiou",!!e)}function h(){return o.b.localStorage.getItem("uoiou")||!1}function m(){o.b.sessionStorage.setItem(r.d,r.c)}function p(e=!1){return h()||o.b.sessionStorage.getItem(r.d)===r.c||!e&&c()}},VL22:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u}));var a=n("17x9"),o=n.n(a),r=n("kmwA");const s={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},i=e=>e.facebook_id?s.FACEBOOK:e.google_open_id_token?s.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?s.GOOGLE:e.email?s.EMAIL:s.OTHER,l=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(s))}),e=>e in r.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),c=e=>r.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e),u=e=>r.a.settings.AGE_COLLECTION_MARKETS.has(e)},a0jO:function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const a=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'" Pro W3"','"Hiragino Kaku Gothic Pro"',"","Meiryo",'" "',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),o=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue Bold"',"Helvetica",'" Pro W3"','"Hiragino Kaku Gothic Pro"',"","Meiryo",'" "',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},dg5e:function(e,t,n){n.r(t);n("bZMm");var a=n("JW66"),o=n("+NLT"),r=n("eOdZ"),s=n("kmwA"),i=n("BlMG"),l=n("zwad");const c={_parseJson:function(e){return e.json()},_throwError:function(e){const t=new Error(e.statusText);throw t.response=e,c._reconstructError(t),t},_checkStatus:function(e){return 200===e.status||401===e.status?e:(c._throwError(e),{})},_crossDomainRequest:function(e,t,n){if("GET"!==n&&"POST"!==n)return Promise.resolve({});const r={credentials:"include",mode:"cors"};return"POST"===n&&(r.method="POST",r.body=t,r.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":o.a.instance.unauth_id},o.a.instance.unauth_id||Object(i.a)(`unauth.auth_handshake.cross_domain.no_unauth_id.${n}`)),fetch(e,r).then(c._checkStatus).then(c._parseJson).then(e=>"success"===e.status?Promise.resolve(e):e.code===a.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(c._throwError(e),{})).catch(e=>{throw e})},_reconstructError:e=>{!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_verifyAndGetToken:function(){const e=s.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return c._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e,t=!1){return r.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate()},verifyLoggedInStatus:function(){c._verifyAndGetToken().then(e=>{if(e&&e.data){const t=e.data;c.exchangeTokenAndSetSession(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},_setUpRegisterParameters:function(e){const t={};if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=o.a.instance.locale,t.referrer=o.a.instance.referrer,e.age){const n=new Date;n.setFullYear(n.getFullYear()-e.age);const a=parseInt(n/1e3,10);t.birthday=a.toString()}if(e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.business_name&&(t.account_type=e.account_type,t.business_name=e.business_name,t.first_name=e.business_name),o.a.instance.invite_code&&(t.invite_code=o.a.instance.invite_code),e.facebook_id){const n=o.a.instance.facebook_token||e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=n,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return l.a.getQueryStringFromObject(t)},_setUpLoginParameters:function(e){const t={};if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=o.a.instance.referrer),e.facebook_id){const n=o.a.instance.facebook_token||e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=n,t.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(t.mfa_token=e.mfa_token),l.a.getQueryStringFromObject(t)},_getRegisterRequestUrl:function(e){let t="/v3/register/email/handshake/";return e.facebook_id&&(t="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(t="/v3/register/gplus/handshake/"),e.business_name&&(t="/v3/register/partner/handshake/"),s.a.settings.ACCOUNTS_PINTEREST_URL+t},_getLoginRequestUrl:function(e){let t="/v3/login/handshake/";return e.facebook_id&&(t="/v3/login/facebook/handshake/"),e.gplus_id_token&&(t="/v3/login/gplus/handshake/"),e.mfa_token&&(t="/v3/login/mfa/handshake/"),s.a.settings.ACCOUNTS_PINTEREST_URL+t},registerUser:function(e){const t=c._getRegisterRequestUrl(e),n=c._setUpRegisterParameters(e);return c._crossDomainRequest(t,n,"POST")},loginUser:function(e){const t=c._getLoginRequestUrl(e),n=c._setUpLoginParameters(e);return c._crossDomainRequest(t,n,"POST")}};t.default=c},iFas:function(e,t,n){t.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",FLASHLIGHT_GRID:"flashlight_grid",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",STORY_PIN_PAGE:"story_pin_page",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},kw3W:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("ADkM"),s=n("0Bqi"),i=n("vlP9"),l=n("iFas"),c=n("h4v/"),u=n("Ye/N"),d=n("shJ5"),h=n("x/Ro"),m=n("3gA6"),p=n("eOdZ"),g=n("kmwA"),f=n("NdXn"),_=n("fArA"),b=n("gC5q"),S=n("XCz/"),x=n("/5zs"),w=n("NtFK"),E=n("U4JR"),y=n("zLLH"),N=n("liz/"),I=n("pLLR"),C=n("n6mq");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(_.compose)(I.e,Object(y.c)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(class extends a.Component{constructor(...e){super(...e),O(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),O(this,"handleAddAccount",()=>{Object(N.k)("add_account_click",null,this.props.container),this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),O(this,"trackProfileNavigateClick",e=>{Object(w.g)(14),Object(N.k)(`current_profile_${e}_click`,null,this.props.container)}),O(this,"handleSwitch",e=>{const{container:t,requestContext:n}=this.props,a=e.partner&&e.partner.is_create;this.setState({isLoading:!0}),Object(E.a)(101,{component:13369,element:11196}),Object(N.k)("switch_account_click",{destination_user_id:e.id},t);const o={get_user:!0,switch_account:e.id};c.a.getInstance().pauseImpressionsAndFlush(),Object(h.a)(o,{container:"account_switcher"},null,!0).then((o={})=>{if(o.resource_response&&o.resource_response.data&&o.resource_response.data.success){const o=new x.b(n,"web_pro_mode_header"),r=o.check("enabled_full_width")||o.check("enabled_full_width_employees");let s=a?"/":`/${e.username}`;r&&(s=`${g.a.settings.CANONICAL_MAIN_URL}/${e.username}/`,a&&(s=g.a.settings.CANONICAL_MAIN_URL)),Object(N.g)(s,e.id,t)}else Object(N.f)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(N.f)(e.id,t),this.setState({isLoading:!1}),n})}),O(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(E.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),c.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(h.a)(n,{container:"account_switcher"},null,!0).then((n={})=>{Object(N.g)("/",e.id,t)},n=>{throw Object(N.f)(e.id,t),this.setState({isLoading:!1}),n})}else p.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(N.j)(n.id),Object(N.g)(`/${e.username}`,n.id,t)},e=>{throw Object(N.f)(n.id,t),this.setState({isLoading:!1}),e})}),O(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),O(this,"handleReauthAccount",()=>{Object(N.k)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),O(this,"handleRemoveUnauthAccount",e=>{Object(N.k)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(N.j)(e),this.setState({failedAccount:null})}),O(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;return e.data?(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(b.a)(f.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{}):null}),O(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>o.a.createElement("li",{key:n},o.a.createElement(C.Q,{onTouch:()=>{this.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(r.a,{large:!0,account:e[t],viewerId:this.props.viewer.id}))),n!==N.a-2&&o.a.createElement(C.j,null)))),O(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(C.d,{text:u.a._("View profile","Visit a user profile from account switcher"),accessibilityLabel:u.a._("Go to current profile","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}),O(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t,enterProMode:n,viewer:{partner:a}}=this.props;return o.a.createElement(C.c,{display:"flex"},o.a.createElement(C.c,{marginEnd:2},o.a.createElement(S.a,{activate:!1,name:"web_pro_mode_header"},({group:e})=>{const r=e.startsWith("enabled_full_width");return o.a.createElement(m.b,{to:r&&a&&!a.is_convert?"/":"/business/hub/",onClick:()=>{Object(E.a)(101,{element:11236}),n&&n(),t&&t()}},o.a.createElement(C.d,{key:"biz-hub-button",text:u.a._("Business hub","Link to Business hub from account switcher"),accessibilityLabel:u.a._("Go to Business hub","Visit the Business hub for the current business user"),size:"sm",color:"red"}))})),o.a.createElement(S.a,{activate:!1,name:"web_pro_mode_header"},({group:n})=>{const a=n.startsWith("enabled_full_width");return o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:a?`${g.a.settings.CANONICAL_MAIN_URL}/${e}/`:`/${e}/`},o.a.createElement(C.d,{text:u.a._("Profile","Visit a user profile from account switcher"),accessibilityLabel:u.a._("Go to current user profile","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}))})}componentDidMount(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(N.k)("modal.shown")}componentWillUnmount(){this.props.container===l.a.ACCOUNT_SWITCHER_MODAL&&Object(N.k)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(d.a,null):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:a}=this.state,l=Object(N.e)(),c=this.getBusinessAccounts(),d=Object.keys(l).length,h=l[this.props.viewer.id];delete l[h.id];const p=h.imageLargeUrl&&!h.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(C.c,{flex:"grow"},a&&o.a.createElement(s.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?o.a.createElement(C.c,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(C.c,{marginBottom:3},o.a.createElement(C.L,null,u.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(r.a,{viewerId:h.id,account:t}),o.a.createElement(C.c,{marginTop:4},o.a.createElement(C.d,{text:u.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(C.c,{marginTop:3},o.a.createElement(C.d,{text:u.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)}))):o.a.createElement(C.c,null,n&&this.renderLoadingIndicator(),o.a.createElement(C.c,null,o.a.createElement(C.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(C.c,{marginRight:4},o.a.createElement(m.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${h.username}/`},o.a.createElement(C.Q,{onTouch:()=>this.trackProfileNavigateClick("avatar")},o.a.createElement(C.a,{name:h.fullName||h.username,size:"lg",src:p?h.imageLargeUrl:""})))),o.a.createElement(C.c,{flex:"grow"},o.a.createElement(C.c,{marginBottom:2},o.a.createElement(C.L,{color:"darkGray",size:"md",truncate:!0,weight:"bold"},h.fullName||h.username),h.email&&o.a.createElement(C.L,{color:"darkGray",size:"md",truncate:!0},h.email)),e?this.renderBusinessButtons(h.username):this.renderPinnerButtons(h.username))),c?o.a.createElement(i.a,{accounts:c,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(C.j,null),e&&e.is_linked_business?null:o.a.createElement(C.c,null,o.a.createElement("ul",null,this.renderAccounts(l)))),d<N.a&&!(e&&e.is_linked_business)&&o.a.createElement(C.c,{paddingX:4,paddingY:3},o.a.createElement(C.d,{text:u.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()}))))}})},"liz/":function(e,t,n){var a=n("xAAE"),o=n("JW66"),r=n("iFas");const s=e=>"undefined"!=typeof window?window.localStorage.getItem(e):null,i=(e,t)=>{"undefined"!=typeof window&&window.localStorage.setItem(e,t)},l={getAccounts:()=>s(o.a.MULTIPLE_ACCOUNTS),getAccountsJSON:()=>l.getAccounts()?JSON.parse(l.getAccounts()):{},getGroupId:()=>{const e=s(o.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:e=>i(o.a.MULTIPLE_ACCOUNTS,e),setGroupId:e=>i(o.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))};var c=l,u=n("xk4V"),d=n.n(u),h=n("D2p8"),m=n("BlMG");n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return _})),n.d(t,"k",(function(){return b})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return x})),n.d(t,"i",(function(){return w})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return N}));const p=4,g=()=>c.getAccountsJSON(),f=()=>Object.keys(g()).length,_=()=>({[o.a.MULTIPLE_ACCOUNTS]:c.getAccountsJSON(),[o.a.MULTIPLE_ACCOUNTS_GROUP]:c.getGroupId()}),b=(e,t,n)=>{let a=c.getGroupId();a||(a=(()=>{const e=d()();return Object(m.d)("web_account_switcher.utils.group_created",{group_id:e,group_count:f()}),e})(),c.setGroupId(a));const o={group_id:a,group_count:f()};let s="";n&&(s=n===r.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(m.d)(`web_account_switcher.${s}${e}`,Object.assign({},t,o))},S=(e,t,n)=>{const a=c.getAccountsJSON();a[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||b("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),c.setAccounts(JSON.stringify(a)),t&&n&&b("new_account_add_success",{method:t,user_added:e.id},n)},x=e=>{const t=c.getAccountsJSON();delete t[e],c.setAccounts(JSON.stringify(t))},w=(e,t)=>{if(!(()=>!!c.getAccounts())()||e&&!(e.id in g())){if(e.partner&&e.partner.is_linked_business&&t)return void S({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});S(e)}},E=(e,t,n)=>{b("switch_account_success",{destination_user_id:t},n),Object(a.a)(e)},y=(e,t)=>{h.c.resume(h.a),b("switch_account_failure",{destination_user_id:e},t)},N=e=>{h.c.resume(h.b),Object(m.a)(`web.dismiss_account_switcher.${e}`)}},ozRy:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("kw3W"),s=n("0Bqi"),i=n("iFas"),l=n("Ye/N"),c=n("TiQD"),u=n("joD6"),d=n("n6mq"),h=n("fArA"),m=n("liz/"),p=n("zLLH");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(h.compose)(u.a,Object(p.c)({name:"UserResource",key:"businessUser",options:({viewer:e})=>({username:e.username,field_set_key:"linked_partner"})}))(class extends a.Component{constructor(e){super(e),g(this,"componentDidMount",()=>{Object(m.i)(this.props.viewer,this.props.businessUser.data)}),g(this,"showLogin",()=>this.setState({showLoginModal:!0})),g(this,"hideLogin",()=>this.setState({showLoginModal:!1}));const{showAddAccount:t}=this.props;this.state={showLoginModal:!!t}}render(){const{customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:a,viewer:u,enterProMode:h}=this.props;return this.state.showLoginModal?o.a.createElement(s.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onClose:a?n:this.hideLogin,customTaglineText:e,hideAccountSwitchValueProp:t}):o.a.createElement(d.c,{position:"relative"},o.a.createElement(c.b,{accessibilityModalLabel:l.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts"),size:"sm",heading:l.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),accessibilityCloseLabel:l.a._("Dismiss selection","Label for dismissing the modal"),onDismiss:n},o.a.createElement(r.a,{container:i.a.ACCOUNT_SWITCHER_MODAL,onNavigateButtonClick:()=>n(),showLogin:this.showLogin,viewer:u,enterProMode:h})))}})},q23S:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),o=n.n(a),r=n("Ye/N"),s=n("MKeS"),i=n("n6mq");const l=Object(s.a)({chunkName:()=>"FullPageSignup",isReady(e){return!!n.m[this.resolve(e)]},requireAsync:()=>Promise.all([n.e(5),n.e(6),n.e(7),n.e("FullPageSignup")]).then(n.bind(null,"pXxl")),requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"pXxl"}});function c(e){return o.a.createElement(l,Object.assign({},e,{fallback:o.a.createElement(i.c,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(i.H,{accessibilityLabel:r.a._("Loading signup form"),show:!0}))}))}},q4E0:function(e,t,n){},shJ5:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("Ye/N"),s=n("n6mq");const i={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};t.a=e=>o.a.createElement("div",null,o.a.createElement("div",{style:i.spinner},o.a.createElement(s.H,{accessibilityLabel:r.a._("Loading"),show:!0})),o.a.createElement("div",{style:i.loadingIndicatorMask}))},vVbV:function(e,t,n){function a(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return a}))},vlP9:function(e,t,n){var a=n("q1tI"),o=n.n(a),r=n("ADkM"),s=n("n6mq");t.a=e=>{const t=Object.keys(e.accounts).length;return o.a.createElement(s.c,{position:"relative"},o.a.createElement(s.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(s.Q,{onTouch:()=>e.onClick(n)},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(r.a,{account:n}))))})))}},"x/Ro":function(e,t,n){var a=n("dg5e"),o=n("+NLT"),r=n("eOdZ"),s=n("pDoi"),i=n("kmwA"),l=n("JW66"),c=n("BlMG");const u=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function d(e,t,n="unknown_source",a=!1){if(e){const o=e.http_status===l.a.RESPONSE_CODE_TOO_MANY_REQUESTS?l.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;let r=o;u.has(o)&&(r=u.get(o));const{container:s}=t;a?Object(c.a)(`unauth_web_client_cctld_login_api_error.${String(r)}.${s||"unknow_container"}.${n}`):Object(c.a)(`unauth_web_client_login_api_error.${String(r)}.${s||"unknow_container"}.${n}`)}}var h=n("UPfj"),m=n("VL22"),p=n("53sj");const g=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?m.a.FACEBOOK:e.google_open_id_token?m.a.GOOGLE_ONE_TAP:e.gplus_id_token?m.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?m.a.EMAIL:m.a.OTHER},f=function(e,t){let n="referrer_unknown";try{const e=document.referrer;n=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const a=g(e),o=t===Object(t)?t.hybridTier:"tier_unknown",r=t===Object(t)?t.container:"container_unknown";Object(c.a)("login.referrer."+n+"."+a),Object(c.a)("login.container."+r+"."+a),Object(c.a)("login.type."+a);const s=g(e)||"method_unknown",i=t.page||"page_unknown";e.gplus_autologin?Object(c.a)("web_autologin_google"):e.facebook_autologin?Object(c.a)("web_autologin_facebook"):Object(c.a)(`web_login.${s}.success.${i}.${r}.${n}.${o}`)},_=(e,t)=>{Object(c.a)(`web_cross_domain_login.${e}.${g(t)}`)};t.a=function(e,t={},n=null,l=!1,c,u){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==i.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(o.a.instance.origin))return function(e,t){return _("attempt",e),a.default.loginUser(e).then(n=>{if(n&&n.data){_("success_with_token",e);const o=n.data;return a.default.exchangeTokenAndSetSession(o).then(n=>(_("success_token_exchanged",e),f(e,t),Promise.resolve()),t=>{throw _("success_token_not_exchanged",e),t})}throw _("success_without_token",e),new Error},n=>{throw _("failure",e),d(n,t,g(e),!0),n})}(e,t)}e.switch_account&&(e.get_user=!!l||e.get_user);const m=l?null:s.b.localStorage.getItem("visitedPagesBeforeLogin"),b={...e,app_type_from_client:5,visited_pages_before_login:m?JSON.stringify(m):null,recaptchaToken:c,tokenV3:u};return r.a.create("UserSessionResource",b).callCreate({showError:!1,async:!0}).then(n=>(f(e,t),Object(h.g)(!1),Object(p.a)("login").then(()=>n)),n=>(d(n,t,g(e)),Promise.reject(n)))}}}]);
//# sourceMappingURL=pjs-24-f7813437806ba1e1cf52.mjs.map
